import{k as N,m as w,l as S,r as a,j as e,L as I,B as o}from"./index-Rlby0J6q.js";import{b as B,c as i,a as l}from"./index.es-BZK4ciJx.js";import{u as T}from"./userService-DXzYnLiy.js";import{C as h,a as m}from"./CRow-CddhGkHr.js";import{C as U}from"./CCardGroup-BFXaK1D-.js";import{C as d,a as p}from"./CCardBody-C_eNDp3N.js";import{C as D}from"./CForm-C_Nlz4zE.js";import{C as u,a as g}from"./CInputGroupText-D2A0-uH6.js";import{c as E}from"./cil-user-Ddrdy7PS.js";import{C as x}from"./CFormInput-COUiFndB.js";import{c as G}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-Bof2vrBs.js";import"./CFormControlValidation-Dpw4CDn_.js";import"./CFormLabel-BSQgwjdn.js";const W=()=>{const j=N(),C=w(s=>s.userLogged),c=S(),[n,y]=a.useState(""),[t,f]=a.useState("");a.useEffect(()=>{C&&k()},[]);const k=()=>{try{c("/lunch/order-history")}catch(s){console.log(s)}},b=s=>{y(s.target.value)},v=s=>{f(s.target.value)},L=async()=>{try{if(n.trim()==""||t.trim()==""){o.warning("Vui lòng nhập số điện thoại và mật khẩu!");return}const s={phone_number:n,password:t,fcm_token:""},r=await T.onUserSignIn(s);r&&(localStorage.setItem("userLogged",JSON.stringify(r.payload)),localStorage.setItem("userToken",r.token),j({type:"set",userLogged:r.payload,userToken:r.token}),o.success("Đăng nhập thành công!"),c("/lunch/order-history"))}catch{o.error("Đăng nhập thất bại!")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(B,{children:e.jsx(h,{className:"justify-content-center",children:e.jsx(m,{md:8,children:e.jsxs(U,{children:[e.jsx(d,{className:"p-4",children:e.jsx(p,{children:e.jsxs(D,{children:[e.jsx("h1",{children:"Đăng nhập"}),e.jsx("p",{className:"text-body-secondary",children:"Đăng nhập vào RDT Lunch"}),e.jsxs(u,{className:"mb-3",children:[e.jsx(g,{children:e.jsx(i,{icon:E})}),e.jsx(x,{placeholder:"Số điện thoại",autoComplete:"username",value:n,onChange:b})]}),e.jsxs(u,{className:"mb-4",children:[e.jsx(g,{children:e.jsx(i,{icon:G})}),e.jsx(x,{type:"password",placeholder:"Mật khẩu",autoComplete:"current-password",value:t,onChange:v})]}),e.jsx(h,{children:e.jsx(m,{children:e.jsx(l,{color:"primary",className:"px-4",onClick:L,children:"Đăng nhập"})})})]})})}),e.jsx(d,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(p,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Đăng ký tài khoản"}),e.jsx("p",{children:"Bạn bận không thể nấu cơm trưa? Bạn lười? Bạn không có thời gian nấu cơm trưa mang đi làm? Đã có tôi! Tôi sẽ thay các bạn chuẩn bị bữa trưa cho bạn ^^"}),e.jsx(I,{to:"/register",children:e.jsx(l,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Đăng ký ngay nè!"})})]})})})]})})})})})};export{W as default};
